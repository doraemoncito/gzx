CC	= gcc
CFLAGS	= -O2 -mno-cygwin -march=i386 -ffast-math -Wall -I../../cygtst/mydirx/include
# CFLAGS	= -O6 -mcpu=pentium -ffast-math -Wall
LXOBJ	= gfx_vga.o snd_alsa.o
WINOBJ	= gfx_win.o snd_win.o sys_win.o
OBJ	= gzx.o z80.o snap.o zx_sound.o zx_tape.o zxt_tap.o zxt_wav.o\
 zxt_tzx.o zx_scr.o ay.o menus.o mgfx.o debug.o disasm.o

all: gzxwin.exe

gzx: $(OBJ) $(LXOBJ)
	gcc -o gzx -s $(OBJ) $(LXOBJ) -lefence -lvga -lasound

gzxwin.exe: $(OBJ) $(WINOBJ)
	gcc -mno-cygwin -o gzxwin.exe -s $(OBJ) $(WINOBJ) -lgdi32 -lwinmm

gzx.o: gzx.c

z80.o: z80.c

snap.o: snap.c

zx_sound.o: zx_sound.c

zx_tape.o: zx_tape.c

zxt_tap.o: zxt_tap.c

zxt_wav.o: zxt_wav.c

zxt_tzx.o: zxt_tzx.c

ay.o: ay.c

mgfx.o: mgfx.c

vgaw.o: vgaw.c

winw.o: winw.c

snd_alsa.o: snd_alsa.c

snd_win.o: snd_win.c

sys_win.o: sys_win.c

debug.o: debug.c

disasm.o: disasm.c

clean:
	rm *.o gzx
